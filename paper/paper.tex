% TODO: add in the referee tag for the submission
%\documentclass[global,twocolumn,referee]{svjour}
\documentclass[global,twocolumn,keeplastbox]{svjour}
\usepackage{cite}
\usepackage{amsmath}
% \usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{url}
\usepackage{comment}
\usepackage{paralist}
\usepackage{graphicx}
\graphicspath{{./figs/}}
\usepackage{listings}
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
\usepackage{flushend}
\usepackage{hyperref}
\usepackage[firstpage]{draftwatermark}
\usepackage[lighttt]{lmodern}
\usepackage[normalem]{ulem}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{light-gray}{gray}{0.88}

\lstdefinestyle{myML}
{frame=none,
  basicstyle=\ttfamily,
  language=ML,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  numbers=none,
  numberstyle=\tiny\color{gray},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=false,
  breakatwhitespace=true,
  tabsize=2,
  linewidth=2\linewidth
}

\lstdefinestyle{agree}
{frame=none,
  basicstyle=\ttfamily,
  language=ML,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  numbers=none,
  numberstyle=\tiny\color{gray},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=false,
  breakatwhitespace=true,
  tabsize=2,
  linewidth=2\linewidth,
  morecomment=[l]{--},
  escapeinside={*}{*},
  morekeywords={eq, bool, guarantee, assume, true, false, pre, not, and, or, property, const, Historically, Since, Once, event, annex, Implementation, process, subcomponents}
}

\hyphenation{op-tical net-works semi-conduc-tor Cake-ML}

\newcommand{\konst}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\imp}{\Rightarrow}
\newcommand{\set}[1]{\ensuremath{\{ {#1} \}}}
\newcommand{\sem}[1]{\ensuremath{[\![ #1 ]\!]}}
\newcommand{\kstar}[1]{\ensuremath{{#1}^{*}}}
\newcommand{\Lang}[1]{\ensuremath{{\mathcal L}({#1})}}
\newcommand{\Eqs}{\ensuremath{\mathit{Eqs}}}
\newcommand{\itelse}[3]{\mbox{$\mathtt{if}\ {#1}\ \mathtt{then}\ {#2}\ \mathtt{else}\ {#3}$}}

\newcommand{\figref}[1]{Fig.~\ref{#1}}
\newcommand{\secref}[1]{Sec.~\ref{#1}}
\newcommand{\lineref}[1]{Line~\ref{#1}}
\newcommand{\linesref}[2]{Lines~\ref{#1}--\ref{#2}}
% \newcommand{\eqref}[1]{Eq.~\ref{#1}}

% Latex trickery for infix div operator, from stackexchange

\makeatletter
\newcommand*{\bdiv}{%
  \nonscript\mskip-\medmuskip\mkern5mu%
  \mathbin{\operator@font div}\penalty900\mkern5mu%
  \nonscript\mskip-\medmuskip
}
\makeatother

\newcommand{\ie}{\textit{i.e.}}
\newcommand{\eg}{\textit{e.g.}}
\newcommand{\etal}{\textit{et al.}}
\newcommand{\etc}{\textit{etc.}}
\newcommand{\adhoc}{\textit{ad hoc}}

% \theoremstyle{plain}
% \newtheorem{theorem}{Theorem}
% \newtheorem{lemma}{Lemma}

% \theoremstyle{definition}
% \newtheorem{definition}{Definition}

% \theoremstyle{remark}
% \newtheorem{remark}{Remark}

\journalname{Software and Systems Modeling}

\newif\ifREVISIONS
\REVISIONSfalse

\begin{document}
\title{
  Synthesizing Verified Components for Cyber Assured Systems Engineering
  \thanks{DISTRIBUTION STATEMENT A.  Approved for public release.}
}

\author{
  Eric Mercer\inst{1}    \and
  Konrad Slind\inst{2}   \and
  Isaac Amundson\inst{2} \and
  Darren Cofer\inst{2}   \and
  Junaid Babar\inst{3}   \and
  David Hardin\inst{3}
}

\institute{
  Brigham Young University        \\
  Provo, Utah                     \and
  Applied Research and Technology \\
  Collins Aerospace               \\
  Minneapolis, Minnesota          \and
  Applied Research and Technology \\
  Collins Aerospace               \\
  Cedar Rapids, Iowa
}

\date{Received: date / Revised version: date}

\maketitle

\begin{abstract}
\input{abstract}
\end{abstract}

\section{Introduction} \label{sec:intro}
\input{intro}

\ifREVISIONS
\subsection{SOSYM Journal Details}
The due date is \textbf{March} $22^\mathrm{nd}$, \textbf{2022}.
Go to \url{https://mc.manuscriptcentral.com/sosym/}. Create a new account (if you don't have one), login and go to the "Author"-section, select the link "Start New Submission" under Author Dashboard and select "Special Section Paper" as the paper type, and choose "MODELS 2021 Special Issue". Also, make sure to mention the MODELS 2021 special issue in the cover letter.
\fi

\ifREVISIONS
\subsection{Revisions}
\begin{compactitem}
  \item Revise the end of the abstract regarding the case studies to be consistent with what ends up in this version of the paper.
  \item Revise the end of the introduction that discusses the case studies to be consistent with what ends up in this version of the paper.
  \item Fix the link to the motivating example to point to the new repository once it is created. Fix in the next section too.
  \item Add discussion on the limitation of the approach: what attacks can and cannot be covered, can valid messages be rejected, etc.
\end{compactitem}
\fi

\section{Illustrative example}
\label{sec:example}
\input{example}

\section{Compositional reasoning}
\label{sec:agree}
\input{verification-conditions}

\section{Syntax and semantics of AGREE}
\label{agree-semantics}
\input{agree-semantics}

\subsection{Formal contract for the example system}
\input{sw-contract}

\ifREVISIONS
\subsection{Revisions}
\begin{compactitem}
  \item \sout{Add in the AGREE specification for the system}
  \item \sout{Add in the AGREE verification conditions (e.g., similar to those in the Scheduled Components NFM submission)}
  \item \sotu{Add reference to the Liskov principle of safe-substitution when stating that the system contract is a sound abstraction of the implementation.}
  \item Add back in a few sentences on the contract for the filter since those have been removed with the addition of the formal definitions.
\end{compactitem}
\fi

\section{Code contracts for cyber components}
\label{sec:code-contracts}
\input{high-assurance-contracts}

\section{Testing Specifications with AGREE}
\label{sec:testing}
\input{testing}

%% \section{Synthesis from code contracts}
%% \label{sec:semantics}
%% \input{semantics}

\ifREVISIONS
\subsection{Revisions}
\begin{compactitem}
  \item Add in intuitive definition or AGREE leaf-component semantics
  \item State well-formed theorem
  \item State correctness theorem or any key theorems to the synthesis proof
\end{compactitem}
\fi

\section{Synthesis to CakeML}
\label{sec:synthesis}
\input{synthesis}

\ifREVISIONS
\subsection{Revisions}
\begin{compactitem}
  \item State theorem relating the step function to the meaning of the leaf-node semantics
\end{compactitem}
\fi

\section{Case studies}
\label{sec:case-study}
\input{case-study}

\ifREVISIONS
\subsection{Revisions}
\begin{compactitem}
  \item Possible Outline:
  \begin{compactitem}
    \item Two case studies: phase 2 is the proof on concept on a industrial size problem while phase 3 tests if AGREE is expressive enough for stating complex properties and if designers are able to use it.
    \item Phase 2 write up focusses on the number of components and the relative ease for AGREE to prove out and for SPLAT to synthesize. It notes that the components were relatively simple.
    \item Phase 3 write up focusses on the shear complexity of the components and in particular the gate and the transport monitor. Here it the need for testing is is most obvious. Also obvious is the need to make AGREE more expressive and to separate AGREE into a specification and implementation language as seen in Dafny.
    \item Make the general observation that the transforms on the AADL model to add the components and connections doesn't really save much time when compared against the time it takes to write and test the specifications. The automations is nice, but not where time is saved. Where time is saved is in the assurance case because once a specification is done, it is synthesized and proved correct for ALL inputs and ALL outputs. Not just some. Not code inspections. Not additional test requirements. All that is saved.
  \end{compactitem}
  \item Clarify research questions answered by the case study
  \item Make the figures bigger
  \item Rewrite to focus on synthesized components and the AGREE specifications
  \item Add an interesting monitor from the TA6 model
  \item Discuss what efforts are optimized with the automations versus a fully manual process for creating the components--how does the automated transformation affect actual time for engineers
\end{compactitem}
\fi

\section{Related work}
\label{sec:related-work}
\input{related-work}

\ifREVISIONS
\subsection{Revisions}
\begin{compactitem}
  \item Add recent work published after 2018
\end{compactitem}
\fi

\section{Conclusion}
\label{sec:conclusion}
\input{conclusion}

\clearpage
\bibliographystyle{plain}
\bibliography{paper}

% \appendix
% \section{Contiguity Types}
% \input{contig}

% \section{System Model and Semantics}
% \input{system}

\end{document}
