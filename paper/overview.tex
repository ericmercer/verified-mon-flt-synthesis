\begin{figure*}
	\begin{center}
	  \includegraphics[width=\textwidth]{./figs/tool-arch.jpg}
  	\end{center}
	\caption{\brfcs\ integrated tool architecture with key components in the general workflow shown in green.} 
	\label{fig:tool-arch} 
\end{figure*}

The BriefCASE OSATE environment, \figref{fig:tool-arch}, provides designers with workflow and tool support for developing products with inherent cyber-resiliency.
It starts with the development of a baseline AADL model of the system architecture that defines the desired functionality.
This baseline model can be evaluated using existing tools such as resource usage, information flow, latency analysis, etc. for validation.

\brfcs\ integrates additional tools into OSATE to analyze, identify, and address cybersecurity vulnerabilities in the baseline AADL model (top of \figref{fig:tool-arch}).
\brfcs\ provides access to analysis tools that examine AADL models, report potential cyber vulnerabilities,
and suggest requirements for mitigation \cite{dcrypps2019,gearcase2020}.
Designers add these requirements to the \brfcs\ project requirements repository. 
A key part of the requirements management in \brfcs\ is a corresponding assurance case that provides evidence, computed directly from the model or by supporting analysis tools, showing how each requirement is satisfied.
Evidential statements must exist to address the added cyber requirements in order for \brfcs\ to build the assurance case for the project.

\brfcs\ provides an extendable library of model transformations to address requirements for common cyber vulnerabilities:
\begin{compactitem}
	\item \textbf{Filter}: block messages that do not conform to a given specification
	\item \textbf{Monitor}: detect and alert violations at runtime
	\item \textbf{Gate}: block messages in the presence of an alert
	\item \textbf{Attestation}: measure non-local software to assess trustworthiness
	\item \textbf{Virtualization}: isolate components with virtualization
	\item \textbf{Proxy}: enable HTTPS message inspection 
	\item \textbf{seL4}: transform component definitions for the seL4 secure micro kernel
\end{compactitem}
Transformations update the AADL model architecture with new components and the assurance case with new evidential statements for the associated goal.
Filters, monitors, and gates are considered high assurance components that require formal reasoning in building the assurance case.
This manuscript discusses how these high assurance components are specified and synthesized with the requisite evidence for the assurance case.

When \brfcs\ inserts a filter, monitor, or gate, high assurance component, it requires evidence that the component is 
\begin{compactenum}
	\item connected in the model, 
	\item cannot be bypassed, 
	\item meets its intended purpose, and
	\item is properly implemented.
\end{compactenum}
Information flow analysis provides evidence for the first two properties while synthesis provide evidence for the last two properties.

The Awas~\cite{awas} AADL information flow analyzer and visualizer provides evidence that high assurance components are connected and not bypassed in the model.
The High Assurance Modeling and Rapid engineering for embedded systems tool (HAMR) generates component infrastructure and integration code implementing the semantics of AADL-compliant thread scheduling, thread dispatching, port-based communication, and real-time scheduling \cite{hamr}.
Along with the code generation, HAMR constructs a proof that all AADL modeled flows are in the implementation and that no extraneous flows have been added to the implementation.
HAMR relies on the seL4 microkernel for its proofs.
The seL4 microkernel, among other security properties, provides strong isolation between components ensuring that there are no communication channels outside of what is defined \cite{sel4-sosp09, sel4-tocs14, sel4-cacm18}.

This manuscript discusses the aspects of \brfcs\ concerning evidence that the component meets its intended purpose and is properly implemented.
The Assume Guarantee Reasoning Environment (AGREE) is a compositional, assume-guarantee-style, model checker for AADL models \cite{compositional-analysis-agree,nfm:agree}. 
AGREE attempts to prove properties about one layer of the architecture using properties allocated to subcomponents.
The composition is performed in terms of \emph{contracts} provided for each component that state the component's \emph{assumptions} on inputs and \emph{guarantees} on outputs under the assumptions.
AGREE verifies the \emph{consistency} of the composition of the component contracts: output guarantees must be strong enough to satisfy input assumptions of downstream components and input assumptions of a system along with the output guarantees of its \emph{sub}-components must be strong enough to satisfy its output guarantees.

The behavior of a high assurance component is specified by the designer in a \emph{code contract}.
A code contract is a subset of the AGREE language with formally defined semantics needed for code synthesis as apposed to only compositional reasoning.
AGREE proves that the code contract meets its intended purpose in the system composition by satisfying the associated cyber-requirements.
Then the Semantic Properties of Language and Automata Theory (SPLAT) tool generates \emph{CakeML} code to implement the code contract.
The CakeML compiler is verified to generate binary implementations that are equivalent in semantics to the original input program \cite{cakeml}.
It proves that the resulting binary exactly preserves the meaning of the original contract to assure that the component is properly implemented.